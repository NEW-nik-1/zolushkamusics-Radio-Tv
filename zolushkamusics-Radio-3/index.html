<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>DJ Room ‚Äî –†–∞–¥–∏–æ, –ß–∞—Ç, –ò–≥—Ä—ã, –¢–í</title>
<style>
body {
    margin: 0;
    font-family: Inter, system-ui, -apple-system;
    background: url('https://raw.githubusercontent.com/NEW-nik-1/zolushkamusics-Radio-Tv/refs/heads/main/background.jpg') no-repeat center center fixed;
    background-size: cover;
    color: #eee;
}
.container { max-width: 1000px; margin: 20px auto; display: flex; gap: 12px; }
.left-panel { width: 780px; height: 450px; border-radius: 12px; padding: 16px; display: flex; flex-direction: column; background: transparent; }
.right-panel { width: 200px; border-radius: 12px; padding: 16px; display: flex; flex-direction: column; align-items: center; background: transparent; }

.vu-meter { display: flex; gap: 4px; margin: 12px 0; }
.vu-col { display: flex; flex-direction: column-reverse; align-items: center; }
.vu-col canvas { width: 20px; height: 200px; background: transparent; border-radius: 3px; }
.vu-col .label { font-size: 8px; margin-top: 1px; background: #ccc; color: #111; padding: 0 2px; border-radius: 2px; text-align: center; min-width: 35px; }

.button-row { display: flex; justify-content: space-between; margin-bottom: 10px; }
button {
    cursor: pointer;
    border: none;
    background: linear-gradient(to bottom, #bbb, #888);
    color: #111;
    padding: 10px;
    font-size: 14px;
    border-radius: 8px;
    font-weight: bold;
    text-shadow: 0 1px 0 #fff;
    width: 32%;
    transition: all 0.1s ease;
    box-shadow: 0 4px #555, inset 0 -2px rgba(255,255,255,0.2);
}
button:active, button.active { transform: translateY(4px); box-shadow: 0 2px #555, inset 0 2px rgba(255,255,255,0.2); background: linear-gradient(to bottom, #888, #555); }

.round-buttons { display: flex; gap: 10px; margin-top: 6px; }
.round-buttons button { width: 40px; height: 40px; border-radius: 50%; font-size: 18px; padding: 0; display: flex; align-items: center; justify-content: center; }

.games-list { background: #222; border-radius: 6px; padding: 10px; max-height: 220px; overflow-y: auto; display: none; width: 100%; margin-top: 8px; }
.games-list ul { list-style: none; margin: 0; padding: 0; }
.games-list ul li a { color: #84cc16; text-decoration: none; display: block; padding: 4px 0; cursor: pointer; }

#volnorez_chat { flex-grow: 1; background: transparent !important; }

#tv-iframe-container, #game-iframe-container {
    position: fixed; top: 80px; right: 20px; background: #000;
    border-radius: 12px; overflow: hidden; display: none; z-index: 10000;
    flex-direction: column; transition: all 0.2s ease;
}
#tv-iframe-header, #game-iframe-header {
    background: #222; padding: 6px; display: flex; justify-content: flex-end; gap: 6px; position: relative;
}
#tv-iframe-header button, #game-iframe-header button { background: none; border: none; color: #eee; font-size: 18px; cursor: pointer; width: 22px; height: 22px; text-align: center; padding: 0; }
#tv-iframe, #game-iframe { width: 100%; height: 100%; border: none; display: block; background: #000; }

#infoOverlay { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.7); display: none; z-index: 20000; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s ease; }
#infoOverlay.show { display: flex; opacity: 1; }
#infoContent { background: #111; color: #fff; padding: 20px; border-radius: 12px; width: 80%; max-width: 600px; max-height: 80%; overflow-y: auto; position: relative; }
#infoContent h2 { margin-top:0; text-align:center; }
#infoCloseBtn { position: absolute; top:10px; right:10px; background:#444; border:none; color:#fff; width:30px; height:30px; border-radius:50%; font-size:20px; cursor:pointer; }

#gameInfoIcon {
    position: absolute; top:10px; left:10px; cursor:pointer; font-size:18px; color:#eee; z-index:11001;
}
#gameHint {
    position: absolute; top:30px; left:10px;
    background: rgba(255,255,255,0.9); color:#000; padding: 4px 8px;
    border-radius:6px; font-size:12px; display:none; z-index:11000;
}

#footer {
    position:fixed; bottom:5px; width:100%; text-align:center; font-size:12px; color:#ccc; z-index:1000;
}
</style>
</head>
<body>

<div class="container">
    <div class="left-panel">
        <div class="button-row">
            <button id="playTvBtn">üì∫ –¢–í</button>
            <button id="playBtn">‚ñ∂ –†–∞–¥–∏–æ</button>
            <button id="gamesBtn">üéÆ –ò–≥—Ä—ã</button>
        </div>
        <div id="volnorez_chat" data-code="001f69a7" data-skin="skin_4">
            <script async type="text/javascript" src="//volnorez.com/plugins/jscode/chat_js"></script>
        </div>
        <div class="games-list">
            <ul>
                <li><a href="#" data-url="https://html5.gamemonetize.co/dd5rs8etri5hw51g32sk69qfdoov5tq2/">Gary's World</a></li>
                <li><a href="#" data-url="https://www.onlinegames.io/games/2021/unity2/crazy-ball-adventures/index.html">Crazy Ball</a></li>
                <li><a href="#" data-url="https://www.gamenora.com/embed/subway-horror-chapter-1">Subway Horror</a></li>
            </ul>
        </div>
    </div>
    <div class="right-panel">
        <div class="vu-meter">
            <div class="vu-col"><canvas id="subbass"></canvas><div class="label">SUB</div></div>
            <div class="vu-col"><canvas id="midbass"></canvas><div class="label">MID B</div></div>
            <div class="vu-col"><canvas id="lowmid"></canvas><div class="label">L MID</div></div>
            <div class="vu-col"><canvas id="mid"></canvas><div class="label">MID</div></div>
            <div class="vu-col"><canvas id="treble"></canvas><div class="label">TREB</div></div>
        </div>
        <div class="round-buttons">
            <button id="muteBtn">üîà</button>
            <button id="infoBtn">‚ùì</button>
        </div>
    </div>
</div>

<section id="tv-iframe-container">
    <div id="tv-iframe-header">
        <button id="tvMinimizeBtn">‚Äì</button>
        <button id="tvRestoreBtn" style="display:none;">‚ñ°</button>
        <button id="tvCloseBtn">√ó</button>
    </div>
    <iframe id="tv-iframe" src="about:blank" allowfullscreen></iframe>
</section>

<section id="game-iframe-container">
    <div id="game-iframe-header">
        <button id="gameMinimizeBtn">‚Äì</button>
        <button id="gameRestoreBtn" style="display:none;">‚ñ°</button>
        <button id="gameFullBtn">‚õ∂</button>
        <button id="gameCloseBtn">√ó</button>
        <div id="gameInfoIcon">‚ùì</div>
        <div id="gameHint">–ó–≤—É–∫ –∏–≥—Ä—ã –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∏–≥—Ä—ã</div>
    </div>
    <iframe id="game-iframe" src="about:blank" allowfullscreen></iframe>
</section>

<div id="infoOverlay">
    <div id="infoContent">
        <button id="infoCloseBtn">√ó</button>
        <h2>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é</h2>
        <ul>
            <li><b>üì∫ –¢–í:</b> –í–∫–ª—é—á–µ–Ω–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ —Ç–µ–ª–µ–≤–∏–∑–æ—Ä–∞ (–≤—ã–∫–ª—é—á–∞–µ—Ç –ò–≥—Ä—ã –∏ –†–∞–¥–∏–æ).</li>
            <li><b>‚ñ∂ –†–∞–¥–∏–æ:</b> –í–∫–ª—é—á–µ–Ω–∏–µ/–ø–∞—É–∑–∞ —Ä–∞–¥–∏–æ (–≤—ã–∫–ª—é—á–∞–µ—Ç –¢–í).</li>
            <li><b>üéÆ –ò–≥—Ä—ã:</b> –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∏–≥—Ä (–∑–∞–∫—Ä—ã–≤–∞–µ—Ç –¢–í, –Ω–æ –†–∞–¥–∏–æ –º–æ–∂–µ—Ç –∏–≥—Ä–∞—Ç—å).</li>
            <li><b>‚õ∂:</b> –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ–∫–Ω–æ –∏–≥—Ä—ã –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω. ESC ‚Äî –≤–æ–∑–≤—Ä–∞—Ç.</li>
            <li><b>‚Äì / ‚ñ°:</b> –°–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–∫–Ω–∞.</li>
            <li><b>üîá/üîà:</b> –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –∑–≤—É–∫–∞ —Ä–∞–¥–∏–æ.</li>
            <li><b>‚ùì –≤ –æ–∫–Ω–µ –∏–≥—Ä—ã:</b> –ü–æ–∫–∞–∑ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –æ –∑–≤—É–∫–µ –∏–≥—Ä—ã.</li>
            <li><b>‚ùì –∫–Ω–æ–ø–∫–∞ —Å–ø—Ä–∞–≤–∞:</b> –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —ç—Ç–æ –∏–Ω—Ñ–æ-–æ–∫–Ω–æ.</li>
            <li><b>VU-–º–µ—Ç—Ä:</b> –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —É—Ä–æ–≤–Ω–∏ —á–∞—Å—Ç–æ—Ç –∑–≤—É–∫–∞.</li>
        </ul>
    </div>
</div>

<div id="footer">–°–æ–∑–¥–∞—Ç–µ–ª—å: NEW-nik-1</div>

<audio id="audio" src="https://stream.volnorez.com/live-app/908925" crossorigin="anonymous"></audio>

<script>
// --- –≠–õ–ï–ú–ï–ù–¢–´
const playBtn = document.getElementById('playBtn');
const playTvBtn = document.getElementById('playTvBtn');
const gamesBtn = document.getElementById('gamesBtn');
const audio = document.getElementById('audio');
const muteBtn = document.getElementById('muteBtn');
const infoBtn = document.getElementById('infoBtn');
const infoOverlay = document.getElementById('infoOverlay');
const infoCloseBtn = document.getElementById('infoCloseBtn');
const gamesList = document.querySelector('.games-list');

const tvContainer = document.getElementById('tv-iframe-container');
const tvIframe = document.getElementById('tv-iframe');
const tvCloseBtn = document.getElementById('tvCloseBtn');
const tvMinimizeBtn = document.getElementById('tvMinimizeBtn');
const tvRestoreBtn = document.getElementById('tvRestoreBtn');
let tvOriginalSize = { width:'500px', height:'400px' };

const gameContainer = document.getElementById('game-iframe-container');
const gameIframe = document.getElementById('game-iframe');
const gameCloseBtn = document.getElementById('gameCloseBtn');
const gameFullBtn = document.getElementById('gameFullBtn');
const gameMinimizeBtn = document.getElementById('gameMinimizeBtn');
const gameRestoreBtn = document.getElementById('gameRestoreBtn');
let gameOriginalSize = { width:'500px', height:'400px', top:'80px', right:'20px' };

const gameInfoIcon = document.getElementById('gameInfoIcon');
const gameHint = document.getElementById('gameHint');

let muted = false;

// --- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
window.addEventListener('DOMContentLoaded', () => {
    closeTv();
    closeGame();
    gamesList.style.display = 'none';
    playBtn.textContent = '‚ñ∂ –†–∞–¥–∏–æ';
    muteBtn.textContent = 'üîà';
    audio.muted = muted;
    audio.pause();
});

// --- –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ
function stopRadio(){
    if(!audio.paused){ audio.pause(); }
    playBtn.classList.remove('active');
    playBtn.textContent='‚ñ∂ –†–∞–¥–∏–æ';
}
function stopTv(){
    closeTv();
    playTvBtn.classList.remove('active');
}
function closeTv(){ tvContainer.style.display='none'; tvIframe.src='about:blank'; }
function openTv(){ 
    tvContainer.style.display='flex'; 
    tvContainer.style.width=tvOriginalSize.width; 
    tvContainer.style.height=tvOriginalSize.height; 
    tvIframe.src='https://smotret.tv/'; 
}
function closeGame(){ 
    if(document.fullscreenElement===gameContainer || document.webkitFullscreenElement===gameContainer){
        if(document.exitFullscreen) document.exitFullscreen();
        else if(document.webkitExitFullscreen) document.webkitExitFullscreen();
    }
    gameContainer.style.display='none'; 
    gameIframe.src='about:blank'; 
    gamesBtn.classList.remove('active'); 
    gamesBtn.textContent='üéÆ –ò–≥—Ä—ã';
}

// --- –¢–í
playTvBtn.addEventListener('click', ()=> {
    if(tvContainer.style.display==='flex'){ 
        stopTv();
    }
    else { 
        closeGame(); 
        stopRadio();
        openTv(); 
        playTvBtn.classList.add('active'); 
    }
});
tvCloseBtn.onclick = ()=>{ stopTv(); };

// --- –¢–í —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
tvMinimizeBtn.addEventListener('click', () => {
    tvContainer.style.height = '40px';
    tvIframe.style.display = 'none';
    tvMinimizeBtn.style.display = 'none';
    tvRestoreBtn.style.display = 'inline-block';
});
tvRestoreBtn.addEventListener('click', () => {
    tvContainer.style.height = tvOriginalSize.height;
    tvIframe.style.display = 'block';
    tvMinimizeBtn.style.display = 'inline-block';
    tvRestoreBtn.style.display = 'none';
});

// --- –ò–≥—Ä—ã
gamesBtn.addEventListener('click', ()=>{ 
    stopTv();
    gamesList.style.display = (gamesList.style.display==='block'?'none':'block'); 
});
document.querySelectorAll('.games-list a').forEach(el=>{
    el.onclick = e=>{
        e.preventDefault();
        stopTv();
        gameContainer.style.display='flex';
        gameContainer.style.width = gameOriginalSize.width;
        gameContainer.style.height = gameOriginalSize.height;
        gameContainer.style.top = gameOriginalSize.top;
        gameContainer.style.right = gameOriginalSize.right;
        gameIframe.src = el.dataset.url;
        gamesList.style.display='none';
        gamesBtn.classList.add('active'); gamesBtn.textContent='üïπ –ò–≥—Ä—ã';
    }
});
gameCloseBtn.onclick = ()=>{ closeGame(); };

// --- –ò–≥—Ä—ã —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
gameMinimizeBtn.addEventListener('click', () => {
    gameContainer.style.height = '40px';
    gameIframe.style.display = 'none';
    gameMinimizeBtn.style.display = 'none';
    gameRestoreBtn.style.display = 'inline-block';
});
gameRestoreBtn.addEventListener('click', () => {
    gameContainer.style.height = gameOriginalSize.height;
    gameIframe.style.display = 'block';
    gameMinimizeBtn.style.display = 'inline-block';
    gameRestoreBtn.style.display = 'none';
});

gameFullBtn.addEventListener('click', ()=>{
    if(document.fullscreenElement===gameContainer || document.webkitFullscreenElement===gameContainer){
        if(document.exitFullscreen) document.exitFullscreen();
        else if(document.webkitExitFullscreen) document.webkitExitFullscreen();
        gameContainer.style.width = gameOriginalSize.width;
        gameContainer.style.height = gameOriginalSize.height;
        gameContainer.style.top = gameOriginalSize.top;
        gameContainer.style.right = gameOriginalSize.right;
    } else {
        if(gameContainer.requestFullscreen) gameContainer.requestFullscreen();
        else if(gameContainer.webkitRequestFullscreen) gameContainer.webkitRequestFullscreen();
    }
});
document.addEventListener('fullscreenchange', ()=>{ 
    if(!document.fullscreenElement){ 
        gameContainer.style.width=gameOriginalSize.width; 
        gameContainer.style.height=gameOriginalSize.height; 
        gameContainer.style.top=gameOriginalSize.top; 
        gameContainer.style.right=gameOriginalSize.right; 
    } 
});

// --- –†–∞–¥–∏–æ
playBtn.addEventListener('click', ()=>{
    audioCtx.resume();
    if(audio.paused){ 
        stopTv();
        audio.play(); 
        playBtn.classList.add('active'); 
        playBtn.textContent='‚è∏ –†–∞–¥–∏–æ'; 
    }
    else { 
        stopRadio();
    }
});

// --- –ó–≤—É–∫
muteBtn.addEventListener('click', ()=>{
    muted = !muted;
    audio.muted = muted;
    muteBtn.textContent = muted ? 'üîá' : 'üîà';
});

// --- –ò–Ω—Ñ–æ –æ–∫–Ω–æ
infoBtn.addEventListener('click', ()=>{ infoOverlay.classList.add('show'); });
infoCloseBtn.addEventListener('click', ()=>{ infoOverlay.classList.remove('show'); });
infoOverlay.addEventListener('click', (e)=>{ if(e.target === infoOverlay){ infoOverlay.classList.remove('show'); } });

// --- –ü–æ–¥—Å–∫–∞–∑–∫–∞ –≤ –∏–≥—Ä–µ
gameInfoIcon.addEventListener('mouseenter', ()=>{ gameHint.style.display='block'; });
gameInfoIcon.addEventListener('mouseleave', ()=>{ gameHint.style.display='none'; });

// --- VU-–º–µ—Ç—Ä
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
const source = audioCtx.createMediaElementSource(audio);
const analyser = audioCtx.createAnalyser();
analyser.fftSize = 512;
source.connect(analyser);
analyser.connect(audioCtx.destination);
const dataArray = new Uint8Array(analyser.frequencyBinCount);
const vuCanvases = ['subbass','midbass','lowmid','mid','treble'].map(id=>document.getElementById(id));
const vuCtx = vuCanvases.map(c=>c.getContext('2d'));
function drawVU(){
    requestAnimationFrame(drawVU);
    if(audio.paused) return;
    analyser.getByteFrequencyData(dataArray);
    const bands = [[0,10],[11,30],[31,50],[51,100],[101,200]];
    bands.forEach((range,i)=>{
        const avg = range.reduce((sum,v)=>sum+(dataArray[v]||0),0)/range.length;
        const h = (avg/255)*200;
        const ctx = vuCtx[i]; const canvas = vuCanvases[i];
        ctx.clearRect(0,0,canvas.width,canvas.height);
        const grad = ctx.createLinearGradient(0,canvas.height,0,0);
        grad.addColorStop(0,'green'); grad.addColorStop(0.5,'yellow'); grad.addColorStop(1,'red');
        ctx.fillStyle = grad;
        ctx.fillRect(0,canvas.height-h,canvas.width,h);
    });
}
drawVU();
</script>
</body>
</html>
